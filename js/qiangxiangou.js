var d={
	'单身贵族':{
		1:{
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/043006ee6cea01617941cbc73ad08e58.jpg@380_380',
			'jia':1199,
			'title':'Haier/海尔 冰箱 BCD-160TMPQ 160升双门冷藏冷冻小型家用节能两门冰箱'
		},
		2:{
			'img':'http://cdn02.ehaier.com/product/5ab1cd9d1671c4e5068b45cd_380_380.jpg',
			'jia':2999,
			'title':'Haier/海尔 无氟变频壁挂式空调 KFR-26GW/28GTM23AU1套机'
		},
		3:{
			'img':'http://cdn02.ehaier.com/product/5afaad2c983d79fe0b8b47f8_380_380.jpg',
			'jia':1799,
			'title':'Haier/海尔 LED电视 LE43Z81'
		},
		4:{
			'img':'http://cdn02.ehaier.com/product/5aead88d1671c4e84c8b45fd_380_380.jpg',
			'jia':899,
			'title':'Leader/统帅 电热水器 LEC5002-WB5金 50升储水式即热节能家用电热水器'
		},
		5:{
			'img':'http://cdn50.ehaier.com/other/php/image/2019/09/6fd202ecc0e0be1d855ca74ea93e6590.jpg@380_380',
			'jia':1799,
			'title':'Haier/海尔 烟灶套系 E800C6T+QE5B1/侧吸/4.1KW大火力/天然气'
		},
		6:{
			'title':'Haier/海尔 波轮洗衣机 EB75M29 7.5公斤智能波轮全自动洗衣机',
			'img':'http://cdn02.ehaier.com/product/59cc7594983d79603e8b46d2_380_380.jpg',
			'jia':999
		}
		
	},
	'二人世界':{
		1:{
			'title':'Haier/海尔 冰箱 BCD-258WDVLU1',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/1a35adb30bbba21e8530664ed05bf0e1.jpg@380_380',
			'jia':2799
		},
		2:{
			'title':'Haier/海尔 无氟变频壁挂式空调 KFR-35GW/28GTM23AU1套机 1.5匹智能变频空调/内机自清洁/芳华系列',
			'img':'http://cdn02.ehaier.com/product/5ab1c52dd9a353a76b8b459b_380_380.jpg',
			'jia':3399
		},
		3:{
			'title':'Haier/海尔 烟灶套系 E900T6R(T)+QE5B1/欧式/顶吸/4.1KW大火力/天然气',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/09/a6d259c1f576492827d49c494c485831.jpg@380_380',
			'jia':2299
		},
		4:{
			'title':'Haier/海尔 4K电视 LS50A51  50英寸超高清网络智能电视机',
			'img':'http://cdn02.ehaier.com/product/59cc9048d9a353f27d8b4712_380_380.jpg',
			'jia':2299
		},
		5:{
			'title':'Haier/海尔 滚筒洗衣机 EG8012B919GU1 8公斤iMate8智能变频滚筒洗衣机',
			'img':'http://cdn02.ehaier.com/product/59b0ab311671c46c058b462c_380_380.jpg',
			'jia':2199
		},
		6:{
			'title':'Haier/海尔 电热水器 EC6002-MC3 60升储水式恒温家用电热水器',
			'img':'http://cdn02.ehaier.com/product/57d8c75e1671c435468b48be_380_380.jpg',
			'jia':1199
		}
	},
	'三口之家':{
		1:{
			'title':'Haier/海尔 烟灶套系 E900T6R(T)+QE9U1/欧式/顶吸/自清洗/防干烧4.5KW大火力/天然气',
			'img':'http://cdn02.ehaier.com/product/59e863b71a0a2ea9268b4775_380_380.jpg',
			'jia':3499
		},
		2:{
			'title':'Haier/海尔 电热水器 EC6003-YT1 60升即热恒温储水式家用电热水器',
			'img':'http://cdn02.ehaier.com/product/58ad2ca4d9a353084d8b48ae_380_380.jpg',
			'jia':1499
		},
		3:{
			'title':'Haier/海尔 无氟变频柜式空调 KFR-72LW/09UCP22AU1套机 3匹智能变频柜机/一键自清洁/星璨帝樽',
			'img':'http://cdn02.ehaier.com/product/56e77db11671c4bd448b4837_380_380.jpg',
			'jia':7099
		},
		4:{
			'title':'Haier/海尔 冰箱 BCD-470WDPG 470升十字对开变频静音节能干湿分储电冰箱',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/614cdfbf6612f9dc8bde6dbae4070ae5.jpg@380_380',
			'jia':4499
		},
		5:{
			'title':'Haier/海尔 冰箱 BCD-217WDVLU1 217升三门双变频智能风冷节能小型家用电冰箱',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/76e79fcc6f439749aad8580830536776.jpg@380_380',
			'jia':2499
		},
		6:{
			'title':'Haier/海尔 4K电视 LU55X52',
			'img':'http://cdn02.ehaier.com/product/5afaadab1671c440648b47ac_380_380.jpg',
			'jia':3799
		}
	},
	'四世同堂':{
		1:{
			'title':'Haier/海尔 冰箱 BCD-591WDVLU1',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/72dd81816c7f1085680602bd452636dd.jpg@380_380',
			'jia':3999
		},
		2:{
			'title':'Haier/海尔 烟灶套系 E900T9W(T)+QE9U1/欧式/顶吸/自清洗/WiFi/延时/防干烧4.5KW大火力/天然气',
			'img':'http://cdn02.ehaier.com/product/59be333c983d79386f8b46d5_380_380.jpg',
			'jia':4599
		},
		3:{
			'title':'Haier/海尔 滚筒洗衣机 EG10014BD959WU1 10公斤直驱变频滚筒洗衣机',
			'img':'http://cdn02.ehaier.com/product/59cc76671671c41b1a8b46c5_380_380.jpg',
			'jia':4399
		},
		4:{
			'title':'Haier/海尔 燃气热水器 JSQ25-13WT5(12T) 13升防风恒温家用燃气热水器',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/03/63a3bb803e8c644da157e604ecb5026a.jpg@380_380',
			'jia':2099
		},
		5:{
			'title':'Leader/统帅 柜式空调 KFR-72LW/09PAQ22ATU1套机 3匹智能变频空调/二级能效/智能物联',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/88c6f506928c2c7330fafbb5609d3af7.jpg@380_380',
			'jia':6399
		},
		6:{
			'title':'Haier/海尔 冰箱 BCD-572WDENU1',
			'img':'http://cdn50.ehaier.com/other/php/image/2019/04/2bdd48e05ed66e2f0318b833b8f1d5e1.jpg@380_380',
			'jia':3399
		}
	}
}
//渲染li
function fx(){
	var goodsLi = $('.goods-top li');
	var shijiGoods=$('.shiji-goods');
	var zuhe=$('#zhuhe');
	var youhui=$('#youhui');
	var geshu=$('#geshu');
	var money=0;
	var nnuumm=0;
	goodsLi.eq(0).css({
		color: '#0000FF',
		borderBottom:'2px solid #0058AC'
	})
	$.each(goodsLi,function(i,el){
		$(el).on('click',function(){
			nnuumm = i;
			//点击过后清除右边的所有内容
			geshu.children('span').html(0);
			zuhe.children('span').html(0.00)
			youhui.children('span').html(0);
			shijiGoods.html('');
			$(this).parent().find('li').css({
				color:'#999999',
				borderBottom:'none'
			});
			$(this).css({
				color: '#0000FF',
				borderBottom:'2px solid #0058AC'
			})
			
			var str='';
			var goodsLeft=$('.goods-left ul');
			goodsLeft.html('');
			$.each(d[$(this).html()],function(i,el){
					var a=$('<li>');
					str =`
					<span></span>
					<a href="">
						<img src="${el.img}" >
					</a>
					<p title="${el.title}">${el.title}</p>
					<div class="goods-chuse">
						<input type="checkbox" name="" id="" value="" />
						￥<span>${el.jia}</span>
					</div>
					`
					a.html(str);
					$(a).appendTo(goodsLeft);
			})
			//添加完成后获取input框
			var goodss=$('.goods-left input');
			$.each(goodss,function(i,el){
				//通过change事件对input的值进行判断
				$(el).on('change',function(){
					//找到图片的链接
					var l=$(this).parents('.goods-chuse').prevAll('a').children().attr('src');
					//找到价格
					var j=parseInt($(this).next().html());
					
					//判断img shijiGoods中是否存在，存在则添加
					var imgS=$('.shiji-goods img');
					if(imgS.length==0 && this.checked){
						//添加
						var di=$('<div>');
						var im=$('<img>').attr('src',l);
						shijiGoods.append(di.append(im));
						//获取div个数
						geshu.children('span').html(shijiGoods.children('div').length);
						money=j;
						zuhe.children('span').html(money+'.00');
						
					}else{
						$.each(imgS,function(i,el){
							//判断src是否存在
							if(el.src==l && !this.checked){
								//存在则删除
								if($(el).parent().next().length==0){
									$(el).parent().prev().remove();
									$(el).parent().remove();
									var k=shijiGoods.children('div').length;
									geshu.children('span').html(shijiGoods.children('div').length);
									money -=j;
									if(k<1){
										youhui.children('span').html(0);
									}else if(k==1){
										money=money+100;
										youhui.children('span').html(0);
									}else if(k==2){
										money=money+100;
										youhui.children('span').html(100);
									}else if(k==3){
										money=money+200;
										youhui.children('span').html(200);
									}else if(k==4){
										money=money+400;
										youhui.children('span').html(400);
									}else if(k==5){
										money=money+800;
										youhui.children('span').html(800);
									}else if(k==6){
										youhui.children('span').html(1600);
									}
									zuhe.children('span').html(money+'.00');
								}else{
									$(el).parent().next().remove();
									$(el).parent().remove();
									var k=shijiGoods.children('div').length;
									geshu.children('span').html(shijiGoods.children('div').length);
									money -=j;
									if(k<1){
										youhui.children('span').html(0);
									}else if(k==1){
										money=money+100;
										youhui.children('span').html(0);
									}else if(k==2){
										money=money+100;
										youhui.children('span').html(100);
									}else if(k==3){
										money=money+200;
										youhui.children('span').html(200);
									}else if(k==4){
										money=money+400;
										youhui.children('span').html(400);
									}else if(k==5){
										money=money+800;
										youhui.children('span').html(800);
									}else if(k==6){
										youhui.children('span').html(1600);
									}
									zuhe.children('span').html(money+'.00');
								}
							}
						})
						if(this.checked){
							//添加
							var di=$('<div>');
							var im=$('<img>').attr('src',l);
							var sp=$('<span>').html('+');
							var k=shijiGoods.children('div').length;
							shijiGoods.append(sp);
							shijiGoods.append(di.append(im));
							geshu.children('span').html(shijiGoods.children('div').length);
							money+=j;
							if(k==1){
								money=money-100;
								youhui.children('span').html(100);
							}else if(k==2){
								money=money-100;
								youhui.children('span').html(200);
							}else if(k==3){
								money=money-200;
								youhui.children('span').html(400);
							}else if(k==4){
								money=money-400;
								youhui.children('span').html(800);
							}else if(k==5){
								money=money-800;
								youhui.children('span').html(1600);
							}
							zuhe.children('span').html(money+'.00');
						}
						
					}
				})
			})
		});
		
		
		
	})
	///外面的js开始部分
	var goodss=$('.goods-left input');
	$.each(goodss,function(i,el){
		//通过change事件对input的值进行判断
		$(el).on('change',function(){
			//找到图片的链接
			var l=$(this).parents('.goods-chuse').prevAll('a').children().attr('src');
			//找到价格
			var j=parseInt($(this).next().html());
			console.log(j)
			//判断img shijiGoods中是否存在，存在则添加
			var imgS=$('.shiji-goods img');
			if(imgS.length==0 && this.checked){
				//添加
				var di=$('<div>');
				var im=$('<img>').attr('src',l);
				shijiGoods.append(di.append(im));
				//获取div个数
				geshu.children('span').html(shijiGoods.children('div').length);
				money=j;
				zuhe.children('span').html(money+'.00');
				
			}else{
				$.each(imgS,function(i,el){
					//判断src是否存在
					if(el.src==l && !this.checked){
						//存在则删除
						if($(el).parent().next().length==0){
							$(el).parent().prev().remove();
							$(el).parent().remove();
							var k=shijiGoods.children('div').length;
							geshu.children('span').html(shijiGoods.children('div').length);
							money -=j;
							if(k<1){
								youhui.children('span').html(0);
							}else if(k==1){
								money=money+100;
								youhui.children('span').html(0);
							}else if(k==2){
								money=money+100;
								youhui.children('span').html(100);
							}else if(k==3){
								money=money+200;
								youhui.children('span').html(200);
							}else if(k==4){
								money=money+400;
								youhui.children('span').html(400);
							}else if(k==5){
								money=money+800;
								youhui.children('span').html(800);
							}else if(k==6){
								youhui.children('span').html(1600);
							}
							zuhe.children('span').html(money+'.00');
						}else{
							$(el).parent().next().remove();
							$(el).parent().remove();
							var k=shijiGoods.children('div').length;
							geshu.children('span').html(shijiGoods.children('div').length);
							money -=j;
							if(k<1){
								youhui.children('span').html(0);
							}else if(k==1){
								money=money+100;
								youhui.children('span').html(0);
							}else if(k==2){
								money=money+100;
								youhui.children('span').html(100);
							}else if(k==3){
								money=money+200;
								youhui.children('span').html(200);
							}else if(k==4){
								money=money+400;
								youhui.children('span').html(400);
							}else if(k==5){
								money=money+800;
								youhui.children('span').html(800);
							}else if(k==6){
								youhui.children('span').html(1600);
							}
							zuhe.children('span').html(money+'.00');
						}
					}
				})
				if(this.checked){
					//添加
					var di=$('<div>');
					var im=$('<img>').attr('src',l);
					var sp=$('<span>').html('+');
					var k=shijiGoods.children('div').length;
					shijiGoods.append(sp);
					shijiGoods.append(di.append(im));
					geshu.children('span').html(shijiGoods.children('div').length);
					money+=j;
					if(k==1){
						money=money-100;
						youhui.children('span').html(100);
					}else if(k==2){
						money=money-100;
						youhui.children('span').html(200);
					}else if(k==3){
						money=money-200;
						youhui.children('span').html(400);
					}else if(k==4){
						money=money-400;
						youhui.children('span').html(800);
					}else if(k==5){
						money=money-800;
						youhui.children('span').html(1600);
					}
					zuhe.children('span').html(money+'.00');
				}
				
			}
		})
	})
	function fn(){
		//点击立即购买跳转购物车页
		var srtin=[];
		
		var lijigoumai=$('.lijigoumai span');
		lijigoumai.bind('click',function(){
			var zhuhe=$('#zhuhe span').html();
			var  goodsLeft=$('.goods-left input');
			 $.each(goodsLeft,function(i,el){
				 //('checked')$("#abc").is(':checked');   
				if($(goodsLeft[i]).is(':checked') ==true){
					srtin.push(i);
				}
			 })
			 if(srtin.length>1){
				 if(localStorage.getItem('userInformation')){
					 var str='';
					 $.each(srtin,function(i,el){
					 	  str = srtin[i]+','+str;
					 })
					 console.log(str,nnuumm)
					  window.open('shopping-cart-gwc.html#'+parseInt(zhuhe)+'+'+str+nnuumm);
					  str='';
					  srtin=[];
				 }else{
					 alert('请先登录');
				 }
				
			 }
			
			  
		})
		
		
	}
	fn()
	
}
fx();
